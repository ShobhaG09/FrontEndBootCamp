


<style>
    .output {
        font-weight:bold;
      }
      #payment {
        text-decoration:underline;
      }
      #graph {
        border:solid black 1px;
      }
      th, td {
        vertical-align: top;
      }
</style>







<title> JavaScript Loan Calculator </title>
<table>
  <tr><th>Enter Loan Data:</th>
    <td></td>
	
	<tr><td>Amount of the loan ($):</td>
	<td><input id="amount" onchange="calculate();"></td>

    </tr>
	<tr><td>Annual interest (%):</td>
	  <td><input id="apr" onchange="calculate();"></td></tr>
	<tr><td>Repayment period (years):</td>
	  <td><input id="years" onchange="calculate();"></td>
	<!-- <tr><td>Zipcode (to find lenders):</td>
	  <td><input id="zipcode" onchange="calculate();"></td> -->
	<!-- <tr><th>Approximate Payments:</th>
	  <td><button onclick="calculate();">Calculate</button></td></tr> -->
	<tr><td>Monthly payment:</td>
	  <td>$<span class="output" id="payment"></span></td></tr>
	<tr><td>Total payment:</td>
	  <td>$<span class="output" id="total"></span></td></tr>
	<tr><td>Total interest:</td>
	  <td>$<span class="output" id="totalinterest"></span></td></tr>
	
	</table>

    <script>
        function calculate() {
        //Look up the input and output elements in the document
        var amount = document.getElementById("amount");
        var apr = document.getElementById("apr");
        var years = document.getElementById("years");
        var zipcode = document.getElementById("zipcode");
        var payment = document.getElementById("payment");
        var total = document.getElementById("total");
        var totalinterest = document.getElementById("totalinterest");
        
      // Get the user's input from the input elements.
      // Convert interest from a percentage to a decimal, and convert from
      // an annual rate to a monthly rate. Convert payment period in years
      // to the number of monthly payments.
      var principal = parseFloat(amount.value);
      var interest = parseFloat(apr.value) / 100 / 12;
      var payments = parseFloat(years.value) * 12;
        
      // compute the monthly payment figure
      var x = Math.pow(1 + interest, payments); //Math.pow computes powers
      var monthly = (principal*x*interest)/(x-1);
      
      // If the result is a finite number, the user's input was good and
      // we have meaningful results to display
      if (isFinite(monthly)){
        // Fill in the output fields, rounding to 2 decimal places
        payment.innerHTML = monthly.toFixed(2);
        total.innerHTML = (monthly * payments).toFixed(2);
        totalinterest.innerHTML = ((monthly*payments)-principal).toFixed(2);
        
      // Save the user's input so we can restore it the next time they visit
       save(amount.value, apr.value, years.value, zipcode.value);
      
       // Advertise: find and display local lenders, but ignore network errors
       try { // Catch any errors that occur within these curly braces
       getLenders(amount.value, apr.value, years.value, zipcode.value);
       }
        
        catch(e) { /* And ignore those errors */ }
       // Finally, chart loan balance, and interest and equity payments
       chart(principal, interest, monthly, payments);
       }
       else {
       // Result was Not-a-Number or infinite, which means the input was
       // incomplete or invalid. Clear any previously displayed output.
       payment.innerHTML = ""; // Erase the content of these elements
       total.innerHTML = ""
       totalinterest.innerHTML = "";
       chart(); // With no arguments, clears the chart
       }
      }
    
    </script>